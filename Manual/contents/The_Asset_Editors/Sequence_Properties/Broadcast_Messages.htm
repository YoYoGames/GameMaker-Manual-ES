<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Mensajes de difusión</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page detailing the dope sheet" />
  <meta name="rh-index-keywords" content="Sequences - Broadcast Messages" />
  <meta name="search-keywords" content="broadcast,messages,broadcast messages" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Mensajes de difusión</h1>
  <p>Tanto las <a href="../Sequences.htm">secuencias</a> como los <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprites.htm">sprites</a> pueden generar lo que se denomina <strong>mensajes</strong> de difusión en cualquier punto de su longitud. Estos mensajes son simples <span class="notranslate">strings</span> que se añaden a fotogramas específicos a lo largo de la animación <span class="notranslate">timeline</span>, y cuando se alcanza ese punto en el <span class="notranslate">timeline</span>, entonces el <span class="notranslate">string</span> se emitirá a todas las instancias que lo escuchen. Cualquier instancia que tenga un <a href="../Object_Properties/Other_Events.htm">evento de emisión de mensajes</a> (que se encuentra en la categoría de eventos<strong>&quot;Otros</strong>&quot;) recibirá el mensaje <span class="notranslate">string</span> cuando se alcance en el <span class="notranslate">timeline</span>, momento en el que depende de ti tener algún código que lo analice y reaccione en consecuencia. Tenga en cuenta también que <span class="notranslate">sequences</span> también puede escuchar los mensajes de difusión, pero esto requiere que usted primero configure el método de escucha usando código (ver la sección <span class="notranslate">GML</span> sobre <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">Eventos de Secuencia y Momentos</a> para más información).</p>
  <p class="note"><strong><span class="note">NOTA</span></strong> Si se establece <strong>el image_index </strong>de una instancia directamente en un fotograma, <em>no</em> se activará ningún mensaje de difusión que pueda estar presente en ese fotograma del objeto <span class="notranslate">sprite</span>.</p>
  <p>Para añadir un mensaje de difusión a la página <span class="notranslate">sequence</span> o <span class="notranslate">sprite</span> <span class="notranslate">timeline</span> sólo tiene que hacer clic en el botón <img>. Se abrirá un cuadro de diálogo en el que podrá añadir el mensaje a difundir:</p>
  <p class="dropspot"><img alt="Broadcast Message Button Icon" class="icon" src="../../assets/Images/Icons/Icon_Broadcast.png" /></p>
  <p>Una vez añadido, el mensaje se mostrará en el <span class="notranslate">Dope Sheet</span> (o en la vista de fotogramas <span class="notranslate">sprite</span> ). Para editarlo, debes hacer clic con el botón derecho del ratón <img> en el icono del mensaje para abrir una lista de todos los mensajes que se superponen al marco (sólo puede haber un mensaje en un marco, pero colocar varios mensajes en marcos consecutivos hará que se superpongan visualmente, dificultando la selección del que quieres y puedes tener un mensaje y un <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">momento</a> en el mismo marco también), y luego seleccionando uno de esta lista se abrirá el diálogo del mensaje donde puedes editarlo o eliminarlo.</p>
  <p>Cuando se dispara un evento de Mensaje de Difusión, habrá un Mapa <a href="../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS</a> especial creado y almacenado en la variable incorporada <span class="inline">event_data</span>. Esta variable ID es una variable incorporada de ámbito <em>global </em>, pero sólo contendrá los datos del mapa DS en el evento que lo activó - en este caso el evento de Mensaje de Difusión - y devolverá -1 en el resto de los momentos. Las claves que tendrá el evento son las siguientes:</p>
  <table>
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="3"><span data-keyref="Type_Struct_Message_Event"><a data-rhwidget="HyperlinkPopover" href="../../../The_Asset_Editors/Sequence_Properties/Broadcast_Messages.htm">Estructura de eventos de mensajes</a></span></th>
      </tr>
      <tr>
        <th>Variable</th>
        <th>Tipo</th>
        <th>Descripción</th>
      </tr>
      <tr>
        <td><span class="inline">event_type</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Overview/Data_Types.htm">Cadena</a></span></td>
        <td>Será el <span class="notranslate">string</span> &quot;<span class="inline">sequence event</span>&quot; para un mensaje enviado desde un <span class="notranslate">Sequence</span> y &quot;<span class="inline">sprite event</span>&quot; para un mensaje enviado desde un <span class="notranslate">Sprite</span>.</td>
      </tr>
      <tr>
        <td><span class="inline">message</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Overview/Data_Types.htm">Cadena</a></span></td>
        <td>Contiene el mensaje <span class="notranslate">string</span> que se ha recibido.</td>
      </tr>
      <tr>
        <td><span class="inline">element_id</span></td>
        <td><span data-keyref="Type_ID_Layer_Element"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_all_elements.htm">ID del elemento de la capa</a></span></td>
        <td>Contiene el ID del elemento de la capa (secuencia/sprite/instancia) que disparó el mensaje. A continuación, puede utilizar este valor de ID para averiguar qué tipo de elemento generó el mensaje utilizando la función <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_element_type.htm"><span class="inline">layer_get_element_type()</span></a> y utilizar las otras funciones relevantes para dirigirlo, o realizar una acción como reproducir un sonido, según sea necesario.</td>
      </tr>
    </tbody>
  </table>
  <p>Ten en cuenta que el evento de mensaje de difusión de una instancia recibirá múltiples <span class="notranslate">strings</span> por cada una de las veces que se envíe un mensaje de difusión. No es necesario que actúe sobre todos ellos, y puede tener diferentes instancias a la escucha de diferentes mensajes de difusión <span class="notranslate">strings</span>. Sin embargo, puede tener una instancia que esté escuchando mensajes que pueden ser recibidos al mismo tiempo. Cuando esto ocurra, el evento se activará varias veces, <em>una por cada cadena de mensajes</em>.</p>
  <p>A continuación se muestra un breve ejemplo de cómo se puede comprobar este evento:</p>
  <p class="code">if event_data[? &quot;event_type&quot;] == &quot;sequence event&quot; // or you can check &quot;sprite event&quot;<br />
    {<br />
        switch (event_data[? &quot;message&quot;])<br />
        {<br />
            case &quot;hit&quot;:<br />
                audio_play_sound(snd_hit, 0, false);<br />
            break;<br />
    <br />
            case &quot;destroy&quot;:<br />
                sequence_destroy(event_data[? &quot;element_id&quot;]);<br />
            break;<br />
        }<br />
    }
  </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Atrás: <a href="../Sequences.htm">Secuencias</a></div>
        <div style="float:right">Siguiente: <a href="The_Sequence_Canvas.htm">El lienzo <span class="notranslate">Sequence</span> </a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Todos los derechos reservados</span></h5>
  </div>
  <!-- KEYWORDS
Sequences - Broadcast Messages
Broadcast Messages
-->
  <!-- TAGS
sequences_broadcast_messages
-->
</body>
</html>