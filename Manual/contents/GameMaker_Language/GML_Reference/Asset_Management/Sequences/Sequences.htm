<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Secuencias</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page outlining the different functions and variables associated with Sequences" />
  <meta name="rh-index-keywords" content="" />
  <meta name="search-keywords" content="Sequences" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Secuencias</h1>
  <p>Las secuencias suelen crearse en <span class="notranslate">IDE</span> utilizando el <a href="../../../../The_Asset_Editors/Sequences.htm">editor de secuencias</a>, pero también pueden crearse y editarse utilizando código. Sin embargo, antes de ver las funciones disponibles, es importante entender la forma en que se define <span class="notranslate">sequences</span> en <span class="notranslate">GameMaker</span> y los diferentes términos que se utilizarán.</p>
  <p>Para empezar, en el nivel superior, tienes un <b>elemento de secuencia</b>. Esto es lo que se coloca en una capa en un <span class="notranslate">room</span>, ya sea a través del Editor <span class="notranslate">Room</span> o en el código utilizando las funciones de <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">capa</a> apropiadas. El elemento de la capa no tiene propiedades reales más que un valor de ID del elemento, pero este ID es necesario para utilizar las funciones de la capa mencionadas anteriormente para cambiar la reproducción de <span class="notranslate">sequence</span> o para acceder a los datos de <span class="notranslate">sequence</span>.</p>
  <p>A continuación, tiene <b>objetos de secuencia</b> e <b>instancias de secuencia</b>, al igual que tiene <span class="notranslate">objects</span> general e instancias. Un <i>objeto</i> <span class="notranslate">sequence</span> es el recurso base tal y como se creó en el <b>Navegador de Activos</b> o utilizando la función <a href="sequence_create.htm"><span class="inline">sequence_create()</span></a>y la <i>instancia</i> <span class="notranslate">sequence</span> es la &quot;copia&quot; de ese <span class="notranslate">sequence</span> <span class="notranslate">object</span> que se ha colocado en un <span class="notranslate">room</span> como elemento de una capa. Piensa en <span class="notranslate">sequence</span> <span class="notranslate">objects</span> como planos y en las instancias de <span class="notranslate">sequence</span> como la creación a partir de esos planos. <span class="notranslate">Sequence</span> <span class="notranslate">objects</span> y las instancias son <a href="../../../GML_Overview/Structs.htm">structs</a> y -a diferencia de los normales <span class="notranslate">objects</span> - un <span class="notranslate">sequence</span> <span class="notranslate">object</span> <span class="notranslate">struct</span> puede editarse en <span class="notranslate">runtime</span>, lo que afectará a todas las instancias posteriores de ese <span class="notranslate">sequence</span> cuando las crees como elementos (y cualquier edición realizada en un <span class="notranslate">sequence</span> <span class="notranslate">object</span> <b>no</b> se restablecerá al reiniciar el juego o el <span class="notranslate">room</span> usando las funciones <span class="inline">room_restart()</span> o <span class="inline">game_restart()</span> ). La instancia <span class="notranslate">sequence</span> <span class="notranslate">struct</span> contiene algunos parámetros para controlar la reproducción y otras cosas (esto se explica con más detalle a continuación), así como los <b>datos de la secuencia</b> <span class="notranslate">struct</span>.</p>
  <p>Por último, como ya se ha mencionado, tiene los <b>datos de la secuencia</b>, que es otro <span class="notranslate">struct</span>. Este <span class="notranslate">struct</span> contiene <i>todos los</i> datos sobre el <span class="notranslate">sequence</span>. Las pistas que contiene, las propiedades que tienen esas pistas, la velocidad de reproducción y mucho más. Los detalles exactos del contenido de este <span class="notranslate">structs</span> se describen a continuación, pero básicamente consiste en la pista de <b>activos</b> <span class="notranslate">structs</span> y <b>la pista de parámetros</b> <span class="notranslate">structs</span> que utilizan <b>datos de fotogramas clave</b> para realizar acciones mientras se reproduce el <span class="notranslate">sequence</span>.</p>
  <p>Los elementos de la secuencia se tratan con las <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">funciones de la capa</a> <span class="notranslate">room</span>, pero para <span class="notranslate">sequence</span> <span class="notranslate">objects</span>, instancias y datos tenemos las siguientes funciones:</p>
  <p> </p>
  <ul class="colour">
    <li><a href="sequence_exists.htm"><span class="notranslate">sequence_exists</span></a></li>
    <li><a href="sequence_create.htm"><span class="notranslate">sequence_create</span></a></li>
    <li><a href="sequence_destroy.htm"><span class="notranslate">sequence_destroy</span></a></li>
    <li><a href="sequence_get.htm"><span class="notranslate">sequence_get</span></a></li>
    <li><a href="sequence_track_new.htm"><span class="notranslate">sequence_track_new</span></a></li>
    <li><a href="sequence_keyframe_new.htm"><span class="notranslate">sequence_keyframe_new</span></a></li>
    <li><a href="sequence_keyframedata_new.htm"><span class="notranslate">sequence_keyframedata_new</span></a></li>
    <li><a href="sequence_get_objects.htm"><span class="notranslate">sequence_get_objects</span></a></li>
    <li><a href="sequence_instance_override_object.htm"><span class="notranslate">sequence_instance_override_object</span></a></li>
  </ul>
  <p> </p>
  <p>También hay una <strong>variable integrada</strong> asociada a las instancias que puede utilizarse para determinar si la instancia se ha utilizado en un <span class="notranslate">sequence</span> o no:</p>
  <p> </p>
  <ul class="colour">
    <li><a href="in_sequence.htm"><span class="notranslate">in_sequence</span></a></li>
  </ul>
  <p class="note"><strong>¡IMPORTANTE!</strong> Si su <span class="notranslate">sequence</span> tiene algunas instancias en él, estas instancias no deberían cambiar sus variables <span class="inline"><span style="font-size:14px;">image_xscale</span> / <span class="inline"><span style="font-size:14px;">image_yscale</span> / <span class="inline"><span style="font-size:14px;">image_angle</span> / <span class="inline"><span style="font-size:14px;">x</span> / <span class="inline"><span style="font-size:14px;">y</span> ya que se sobrescribirán cuando el <span class="notranslate">sequence</span> actualice cada paso después de empezar a ser reproducido.</p>
  <p> </p>
  <p>Antes de utilizar estas funciones para crear o editar <span class="notranslate">sequences</span>, le recomendamos que lea las descripciones detalladas que se ofrecen a continuación para las propiedades de <span class="notranslate">struct</span>. Una visión general de cómo crear un nuevo <span class="notranslate">sequence</span> sería:</p>
  <ul class="colour">
    <li>Cree el nuevo <span class="notranslate">sequence</span> <span class="notranslate">object</span> utilizando la función <span class="inline"><a href="sequence_create.htm">sequence_create()</a></span> y almacene el índice <span class="notranslate">sequence</span> <span class="notranslate">object</span> en una variable. Este índice le da acceso al <span class="notranslate">sequence</span> <span class="notranslate">object</span> <span class="notranslate">struct</span> .</li>
  </ul>
  <p class="code">myseq = sequence_create();</p>
  <ul class="colour">
    <li>Establezca los valores de nivel superior de <span class="notranslate">sequence</span> <span class="notranslate">object</span> como la duración, el modo de reproducción, la velocidad de reproducción, etc. Por ejemplo:</li>
  </ul>
  <p class="code">myseq.length = 120;<br />
    myseq.loopmode = seqplay_pingpong;</p>
  <ul class="colour">
    <li>Antes de poder añadir pistas a <span class="notranslate">sequence</span> <span class="notranslate">object</span>, es necesario crearlas, por lo que ahora se crearía una matriz de pistas de <i>activos</i> que se han definido con la función <a href="sequence_track_new.htm"><span class="inline">sequence_track_new()</span></a>. Tenga en cuenta que en el código, no hay realmente ninguna diferencia entre las pistas de <span class="notranslate">asset</span> y las pistas de parámetros - todas son simplemente pistas y la forma en que se comportan dependerá del tipo de pista que se crea y si se asignan como sub-pistas a una pista de nivel superior o no. Así, crearía una pista para un <span class="notranslate">asset</span>, y luego le asignaría sub-pistas para los diferentes parámetros y estas sub-pistas actuarían como las pistas de <i>parámetros</i> para el <span class="notranslate">asset</span>. El ejemplo siguiente crea una única pista de gráficos <span class="notranslate">asset</span> que se añadirá al <span class="notranslate">sequence</span> posteriormente:</li>
  </ul>
  <p class="code">var mytracks = array_create(1);<br />
    mytracks[0] = sequence_track_new(seqtracktype_graphic);</p>
  <ul class="colour">
    <li>Cada pista <span class="notranslate">asset</span> necesita tener algunos datos para decirle a <span class="notranslate">sequence</span> cómo se verá, o su posición, etc... y esto se añade en forma de <i>fotogramas clave</i>. En el nivel superior de una pista <span class="notranslate">asset</span>, puede establecer <span class="notranslate">keyframes</span> para varias cosas (enumeradas en la sección de la pista <span class="notranslate">Struct</span>, más abajo), pero tenga en cuenta que como estos son <span class="notranslate">asset</span> pista <span class="notranslate">keyframes</span>, no serán interpolados y simplemente cambiarán el valor al que se refieren cuando se alcance el fotograma dado. Cada <span class="notranslate">keyframe</span> es un <span class="notranslate">struct</span> que se añade a un array, y luego este array se asigna a la pista <span class="notranslate">asset</span>. Para crear el <span class="notranslate">keyframe</span> <span class="notranslate">struct</span> llamaríamos a la función <a href="sequence_keyframe_new.htm"><span class="inline">sequence_keyframe_new()</span></a> y para rellenar el <span class="notranslate">keyframe</span> con los datos necesarios, utilizaríamos la función <a href="sequence_keyframedata_new.htm"><span class="inline">sequence_keyframedata_new()</span></a>:</li>
  </ul>
  <p class="code">// Create a new keyframe struct for a graphics asset track and add it to an array (as you can have multiple keys in a frame)<br />
    var graphickeys = array_create(1);<br />
    graphickeys[0] = sequence_keyframe_new(seqtracktype_graphic);<br />
    <br />
    // Set the graphics keyframe top level data for the keyframe position and length, etc...<br />
    graphickeys[0].frame = 0;<br />
    graphickeys[0].length = 1;<br />
    graphickeys[0].stretch = true;<br />
    graphickeys[0].disabled = false;<br />
    <br />
    // Create the channel data that will go into this keyframe (again an array, as each key can have multiple channels of keyframe data)<br />
    var graphickeydata = array_create(1);<br />
    graphickeydata[0] = sequence_keyframedata_new(seqtracktype_graphic);<br />
    graphickeydata[0].spriteIndex = spr_Platform;<br />
    graphickeydata[0].channel = 0;<br />
    <br />
    // Add the keyframe data channels to the graphics track keyframe<br />
    graphickeys[0].channels = graphickeydata;<br />
    <br />
    // Add the definied keyframes to the track<br />
    mytracks[0].name = &quot;TestGraphicTrack&quot;;<br />
    mytracks[0].keyframes = graphickeys;
  </p>
  <ul class="colour">
    <li>Ahora tenemos que crear una pista de parámetros que asignaremos como una subpista a la pista de gráficos que acabamos de crear. Esto se hará de una manera similar a la mostrada anteriormente, sólo que ahora tenemos que dar a la pista un nombre que muestre su propósito, en este caso &quot;posición&quot;, ya que vamos a utilizar esta pista para mover la pista de gráficos en el curso de los cuadros de animación <span class="notranslate">sequence</span>:</li>
  </ul>
  <p class="code">// Create a new parameter track struct for the position of the graphic<br />
    var paramtracks = array_create(1);<br />
    paramtracks[0] = sequence_track_new(seqtracktype_real);<br />
    paramtracks[0].name = &quot;position&quot;;<br />
    paramtracks[0].interpolation = true;<br />
    // Create the keyframe struct to hold the parameter channel data and set the frame position for the keyframe<br />
    var paramkeys = array_create(2);<br />
    paramkeys[0] = sequence_keyframe_new(seqtracktype_real);<br />
    paramkeys[0].frame = 0;<br />
    paramkeys[1] = sequence_keyframe_new(seqtracktype_real);<br />
    paramkeys[1].frame = 120;<br />
    <br />
    // Create the keyframe data structs<br />
    var paramkeydata1 = array_create(2);<br />
    paramkeydata1[0] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata1[0].channel = 0; // Channel 0 for a position track is the X position<br />
    paramkeydata1[0].value = 0;<br />
    <br />
    paramkeydata1[1] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata1[1].channel = 1; // Channel 1 for a position track is the Y position<br />
    paramkeydata1[1].value = 0;<br />
    <br />
    var paramkeydata2 = array_create(2);<br />
    paramkeydata2[0] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata2[0].channel = 0;<br />
    paramkeydata2[0].value = room_width;<br />
    paramkeydata2[1] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata2[1].channel = 1;<br />
    paramkeydata2[1].value = room_height;<br />
    <br />
    // Assign the keyframe data structs to the channels for each key<br />
    paramkeys[0].channels = paramkeydata1;<br />
    paramkeys[1].channels = paramkeydata2;<br />
    <br />
    // Assign the keys to the parameter track<br />
    paramtracks[0].keyframes = paramkeys;
  </p>
  <ul class="colour">
    <li>Una vez hecho esto, lo último que hay que hacer es asignar la pista de parámetros como una sub-pista a nuestra pista principal de gráficos <span class="notranslate">asset</span> que hemos creado al principio y luego asignar estas pistas a la <span class="notranslate">sequence</span> de la que podemos crear una instancia en la sala:</li>
  </ul>
  <p class="code">mytracks[0].tracks = paramtracks;<br />
    myseq.tracks = mytracks;<br />
    layer_sequence_create(&quot;Assets_1&quot;, 0, 0, myseq);</p>
  <p>Las instrucciones anteriores crean un <span class="notranslate">sequence</span> <span class="notranslate">object</span> muy simple que dibuja un <span class="notranslate">sprite</span> en la posición (0, 0) <i>de la secuencia</i> y luego lo mueve a la esquina inferior derecha y de vuelta en un <span class="notranslate">loop</span>. Como se ha mencionado, hay una serie de lugares en los que es necesario acceder a diferentes <span class="notranslate">structs</span> para dar u obtener datos sobre el <span class="notranslate">sequence</span>, y las secciones siguientes enumeran todas las diferentes propiedades que contienen estos <span class="notranslate">structs</span>:</p>
  <ul class="colour">
    <li><a name="object"></a><a href="Sequence_Structs/The_Sequence_Object_Struct.htm"><label for="1">La estructura <span class="notranslate">Sequence</span> <span class="notranslate">Object</span> </label></a></li>
    <li><a name="instance"></a><a href="Sequence_Structs/The_Sequence_Instance_Struct.htm"><label for="2">La estructura de la instancia <span class="notranslate">Sequence</span> </label></a></li>
    <li><a name="track"></a><a href="Sequence_Structs/The_Track_Struct.htm"><label for="3">La estructura de la pista</label></a></li>
    <li><a name="keyframe"></a><a href="Sequence_Structs/The_Keyframe_Struct.htm"><label for="4">La estructura <span class="notranslate">Keyframe</span> </label></a></li>
    <li><a name="keyframe_data"></a><a href="Sequence_Structs/The_Keyframe_Data_Struct.htm"><label for="5">La estructura de datos <span class="notranslate">Keyframe</span> </label></a></li>
  </ul>
  <p> </p>
  <p>Por último, es posible añadir código a <span class="notranslate">sequences</span> que puede activarse como un <strong>evento</strong> un <strong>momento</strong> o como un <strong>mensaje de difusión</strong>. Esto se explica completamente en la siguiente página:</p>
  <ul class="colour">
    <li><a href="Sequence_Events_Moments_Broadcast.htm">Eventos, momentos y mensajes de difusión</a></li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Atrás: <a href="../Asset_Management.htm">Gestión de activos</a></div>
        <div style="float:right">Siguiente: <a href="../Fonts/Fonts.htm">Fuentes</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Todos los derechos reservados</span></h5>
  </div>
  <!-- KEYWORDS
Sequences
-->
  <!-- TAGS
sequence_functions
-->
</body>
</html>